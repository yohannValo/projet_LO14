#c'est le fichier principal du script qui permet de synchroniser les arbres
#!/bin/bash

if [ $# -ge 0 ] && [ $# -lt 4 ] # si on a entre 1 et 3 arguments sachant que arg0 = le script
then 
	if [ ! -e /etc/.functions/.synchro ]
	then
		fonction=`find / -type d -name .functions 2>/dev/null`
               	sudo mv $fonction /etc/
		sudo touch /etc/.functions/.arbre1
		sudo touch /etc/.functions/.arbre2
	        source /etc/.functions/demarrage	 
		sudo cp -pr $chemin1 $chemin2
		echo "creation du ficher de synchronisation et mise a niveau des deux arbres "
		sudo touch /etc/.functions/.synchro
		sudo ls -lR $chemin1 | grep ^- > /etc/.functions/.synchro
	else 
		chemin1=`cat /etc/.functions/.arbre1`
		chemin2=`cat /etc/.functions/.arbre1`
		echo "le fichier synchro existe deja"
		source /etc/.functions/recursif $chemin1 $chemin2
		source /etc/.functions/recursif $chemin2 $chemin1
		ls -lR $chemin1 | grep ^- > /etc/.functions/.synchro
	fi
fi 

